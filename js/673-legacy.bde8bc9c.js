(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[673],{1673:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"container py-5"},[t("form",{on:{submit:function(r){return r.preventDefault(),r.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"name"}},[e._v(e._s(e.user.name))]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"Enter Name",required:""},domProps:{value:e.user.name},on:{input:function(r){r.target.composing||e.$set(e.user,"name",r.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"image"}},[e._v("Image")]),e.user.image?t("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.user.image,width:"200",height:"200"}}):e._e(),t("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:e.handleFileChange}})]),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(e._s(e.isProcessing?"處理中...":"Submit"))])])])},a=[],i=t(3019),s=t(6198),u=(t(5666),t(9653),t(8309),t(1539),t(8783),t(3948),t(285),t(1637),t(3210),t(1703),t(6017)),o=t(1926),c=t(629),m={name:"user-edit",data:function(){return{user:{id:-1,name:"",image:""},isProcessing:!1}},beforeRouteUpdate:function(e,r,t){var n=e.params.id;this.fetchUser(n),t()},created:function(){var e=this.$route.params.id;this.fetchUser(e)},methods:{fetchUser:function(e){var r=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r.currentUser.id===Number(e)){t.next=4;break}return o.F.fire({icon:"warning",title:"存取被拒"}),t.abrupt("return",r.$router.push({name:"root"}));case 4:return t.next=6,u.Z.get({userId:e});case 6:n=t.sent,a=n.data,r.user.id=a.profile.id,r.user.name=a.profile.name,r.user.image=a.profile.image,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),o.F.fire({icon:"error",title:"無法取得用戶資料，請稍後再試"}),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},handleFileChange:function(e){var r=e.target.files;if(0===r.length)return this.user.image="";var t=window.URL.createObjectURL(r[0]);this.user.image=t},handleSubmit:function(e){var r=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var n,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,r.currentUser.id===r.user.id){t.next=4;break}return o.F.fire({icon:"warning",title:"存取被拒"}),t.abrupt("return",r.$router.push({name:"root"}));case 4:if(r.user.name.trim()){t.next=7;break}return o.F.fire({icon:"warning",title:"名稱不得為空"}),t.abrupt("return");case 7:return r.isProcessing=!0,n=e.target,a=new FormData(n),t.next=12,u.Z.update({userId:r.user.id,formData:a});case 12:if(i=t.sent,s=i.data,"success"===s.status){t.next=16;break}throw new Error(s.message);case 16:r.$router.push({name:"user",params:{id:r.user.id}}),t.next=24;break;case 19:t.prev=19,t.t0=t["catch"](0),r.isProcessing=!1,o.F.fire({icon:"error",title:"無法更新用戶資料，請稍後再試"}),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,19]])})))()}},computed:(0,i.Z)({},(0,c.rn)(["currentUser"]))},l=m,f=t(1001),p=(0,f.Z)(l,n,a,!1,null,null,null),d=p.exports},6091:function(e,r,t){var n=t(6530).PROPER,a=t(7293),i=t(1361),s="​᠎";e.exports=function(e){return a((function(){return!!i[e]()||s[e]()!==s||n&&i[e].name!==e}))}},3210:function(e,r,t){"use strict";var n=t(2109),a=t(3111).trim,i=t(6091);n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})}}]);
//# sourceMappingURL=673-legacy.bde8bc9c.js.map